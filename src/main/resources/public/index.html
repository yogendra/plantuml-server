<!doctype html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta http-equiv="expires" content="0" />
    <meta http-equiv="pragma" content="no-cache" />
    <meta http-equiv="cache-control" content="no-cache, must-revalidate" />

    <title>PlantUML Server</title>

    <link rel="icon" href="${contextroot}/favicon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" href="${contextroot}/favicon.ico" type="image/x-icon"/>

    <link rel="stylesheet" href="${contextroot}/plantuml.css" />
    <link rel="stylesheet" href="webjars/codemirror/3.21/lib/codemirror.css"/>
    <link rel="stylesheet" href="${contextroot}/webjars/codemirror/3.21/lib/codemirror.css" />

    <script src="webjars/codemirror/3.21/lib/codemirror.js"></script>
    <script src="${contextroot}/webjars/codemirror/3.21/lib/codemirror.js"></script>
    <script src="${contextroot}/plantuml.js"></script>
    <script>
        window.onload = function() {
            var myCodeMirror = CodeMirror.fromTextArea(
                document.getElementById("text"),
                {lineNumbers: true}
            );
        };
    </script>
</head>
<body>
<div id="header">
    <h1>PlantUML Server</h1>
    <c:if test="${cfg['SHOW_SOCIAL_BUTTONS'] eq 'on' }">
        <%@ include file="resource/socialbuttons1.html" %>
    </c:if>
    <c:if test="${cfg['SHOW_GITHUB_RIBBON'] eq 'on' }">
        <%@ include file="resource/githubribbon.html" %>
    </c:if>
    <p>Create your <a href="http://plantuml.sourceforge.net">PlantUML</a> diagrams directly in your browser !</p>
</div>
<div id="content">
    <%-- CONTENT --%>
    <form method="post" accept-charset="UTF-8"  action="${contextroot}/form">
        <p>
            <textarea id="text" name="text" cols="120" rows="10"><c:out value="${decoded}"/></textarea>
            <input type="submit" />
        </p>
    </form>
    <hr/>
    <p>You can enter here a previously generated URL:</p>
    <form method="post" action="${contextroot}/form">
        <p>
            <input name="url" type="text" size="150" value="${imgurl}" />
            <br/>
            <input type="submit"/>
        </p>
    </form>
    <c:if test="${!empty imgurl}">
        <hr/>
        <a href="${svgurl}">View as SVG</a>&nbsp;
        <a href="${txturl}">View as ASCII Art</a>&nbsp;
        <c:if test="${!empty mapurl}">
            <a href="${mapurl}">View Map Data</a>
        </c:if>
        <c:if test="${cfg['SHOW_SOCIAL_BUTTONS'] == 'on' }">
            <%@ include file="resource/socialbuttons2.jspf" %>
        </c:if>
        <p id="diagram">
            <c:choose>
                <c:when test="${!empty mapurl}">
                    <img src="${imgurl}" alt="PlantUML diagram" usemap="#umlmap" />
                    <map name="umlmap">
                        <c:import url="${mapurl}" />
                    </map>
                </c:when>
                <c:otherwise>
                    <img src="${imgurl}" alt="PlantUML diagram" />
                </c:otherwise>
            </c:choose>
        </p>
    </c:if>
</div>
</body>
</html>
